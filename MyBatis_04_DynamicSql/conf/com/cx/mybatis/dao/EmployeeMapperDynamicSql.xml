<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cx.mybatis.dao.EmployeeMapperDynamicSql">
	<!-- 
		if
		choose (when, otherwise)
		trim (where, set)
		foreach
	 -->
	 <!-- 
	 	查询员工：要求，携带了那个字段的查询条件就带上这个字段的值
	  -->
	  <!-- 
	  
	   -->
	  <select id="getEmpsByConIf" resultType="com.cx.mybatis.bean.Employee">
	  	select * from tbl_employee
	  	<where>
	  		<!-- test=""判断表达式 (OGNL表达式)
	  		从参数中取值进行判断
	  		遇见特殊符号应该去写转义字符
	  		&&也是特殊字符
	  		-->
		  	<if test="id!=null">
		  		 id=#{id} 
		  	</if>
		  	<if test="lastName != null and lastName != ''">
		  		and last_name like #{lastName} 
		  	</if>
		  	<if test="email!=null and email.trim()!=''">
		  		and email=#{email} 
		  	</if>
		  	<!-- ognl会进行字符串与数字的转换判断 -->
		  	<if test="gender==0 or gender==1">
		  		and gender =#{gender}
		  	</if>
	  	</where>
	  	
	  </select>
	  
	  
	  <select id="getEmpsByConTrim" resultType="com.cx.mybatis.bean.Employee">
	  	select * from tbl_employee
	  	<!-- 后面多出的and或or where标签不能截取 
	  		prefix：前缀：trim标签体中是整个字符串拼串后的结果
	  			prefix加前缀
	  		prefixOverrides：前缀覆盖：去掉整个字符串前面多余的字符
	  		suffix：后缀：加后缀
	  		suffixOverrides：后缀覆盖:去掉整个字符串后面多余的字符
	  	-->
	  	<!-- 自定义字符串的截取规则 -->
	  	<trim prefix="where"  suffixOverrides="and">
	  		<!-- test=""判断表达式 (OGNL表达式)
	  		从参数中取值进行判断
	  		遇见特殊符号应该去写转义字符
	  		&&也是特殊字符
	  		-->
		  	<if test="id!=null">
		  		 id=#{id} and
		  	</if>
		  	<if test="lastName != null and lastName != ''">
		  		 last_name like #{lastName} and
		  	</if>
		  	<if test="email!=null and email.trim()!=''">
		  		 email=#{email} and
		  	</if>
		  	<!-- ognl会进行字符串与数字的转换判断 -->
		  	<if test="gender==0 or gender==1">
		  		 gender =#{gender}
		  	</if>
	  	</trim>
	  </select>
</mapper>